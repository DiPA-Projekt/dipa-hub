<div id="gantt" class="gantt" #gantt>
  <div class="content-container">
    <span style="display: flex; margin-bottom: 10px">
      <span class="full-width-spacer"></span>
      <mat-button-toggle-group
        name="chartMetric"
        #group="matButtonToggleGroup"
        multiple
        aria-label="Chart Metric"
        [(ngModel)]="viewTypeSelected"
        (change)="changeViewType($event)"
      >
        <mat-button-toggle class="md-button" value="YEARS">Jahre</mat-button-toggle>
        <mat-button-toggle class="md-button" value="MONTHS">Monate</mat-button-toggle>
        <mat-button-toggle class="md-button" value="WEEKS">Wochen</mat-button-toggle>
        <mat-button-toggle class="md-button" value="DAYS">Tage</mat-button-toggle>
      </mat-button-toggle-group>
    </span>
    <ng-container *ngIf="vm$ | async as vm">
      <app-chart
        #ganttChart
        [timelineData]="vm.selectedTimeline"
        [milestoneData]="vm.milestoneData"
        [taskData]="vm.taskData"
        [incrementsData]="vm.incrementsData"
        id="gantt{{ vm.selectedTimeline.id }}"
        [isAdmin]="false"
        [showActions]="true"
        (projectApproachChanged)="setData()"
      ></app-chart>
    </ng-container>
  </div>
</div>
<div *ngIf="projectTask">
  <mat-card class="appointments-card">
    <mat-card-content>
      <div *ngFor="let appt of projectTask.results">
        <ng-container *ngIf="filterOpenAppointments(appt)">
          <ng-container *ngFor="let formField of appt.formFields">
            <ng-container *ngIf="formField.key !== 'status'">
              <mat-form-field>
                <mat-label>{{ formField.label }}</mat-label>
                <input matInput [value]="formField.value" disabled />
              </mat-form-field>
            </ng-container>
            <ng-container *ngIf="formField.key === 'status'">
              <mat-form-field>
                <mat-label>{{ formField.label }}</mat-label>
                <mat-select
                  [value]="formField.value"
                  (selectionChange)="changeStatus($event.value, appt.id, formField.id)"
                >
                  <mat-option *ngFor="let opt of formField.options" [value]="opt.key">
                    {{ opt.value }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </ng-container>
          </ng-container>
        </ng-container>
      </div>
    </mat-card-content>
  </mat-card>
</div>
